import algoliasearch from 'algoliasearch';

import {
  createAlgoliaQueryEnhancer,
  AlgoliaClientList,
} from '@uniformdev/canvas-algolia';

export { CANVAS_ALGOLIA_QUERY_PARAMETER_TYPES } from "@uniformdev/canvas-algolia";

export const algoliaQueryEnhancer = () => {

  const { public: { algoliaId, algoliaSearchApi, algoliaIndex } } = useRuntimeConfig()

  const client = algoliasearch(
    algoliaId,
    algoliaSearchApi
  ).initIndex(algoliaIndex);

  return createAlgoliaQueryEnhancer({
    clients: new AlgoliaClientList({ client })
  });
};